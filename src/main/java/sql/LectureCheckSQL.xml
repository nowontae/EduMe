<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.edume.admin_Declaration">
  	
  	<!-- 메인 겸 리스트-->
  	<select id="lectureCheckList" parameterType="Map" resultType="com.edume.admin_teacher_lectureCheck.model.LectureCheckDTO">
	select * 
	from   (select rownum as rnum,a.* 
	  		from	(select * 
	  		         from lecture  where lopen='N' order by lwritedate desc) a)   b 
	where rnum <![CDATA[>=]]> #{start} and rnum <![CDATA[<=]]> #{end}
  	</select>
  	
  	<select id="lectureCheckY" parameterType="Map" resultType="com.edume.admin_teacher_lectureCheck.model.LectureCheckDTO">
	select * 
	from   (select rownum as rnum,a.* 
	  		from	(select * 
	  		         from lecture  where lopen='Y' order by lwritedate desc) a)   b 
	where rnum <![CDATA[>=]]> #{start} and rnum <![CDATA[<=]]> #{end}
  	</select>
  	
  	<!-- 페이징 -->
	<select id="checkYTotalCnt" resultType="Integer">
		select count(*) from lecture where lopen='Y'
	</select>
	
	<select id="checkNTotalCnt" resultType="Integer">
		select count(*) from lecture where lopen='N'
	</select>
	
	<!-- 본문보기-->
	
	<select id="lectureContent" parameterType="Map" resultType="com.edume.admin_teacher_lectureCheck.model.LectureCheckDTO">
	select * from lecture where lidx=#{lidx}
	</select>
	
	<update id="lectureOpen" parameterType="com.edume.admin_teacher_lectureCheck.model.LectureCheckDTO" >
	update lecture set lopen='Y'where lidx=#{lidx}
	</update>
  </mapper>