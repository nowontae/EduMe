<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="com.edume.lecture">
 	<select id="discount"  parameterType="int"  resultType="com.edume.lecture.model.LectureDTO" >
 		select lad.lidx, lad.ladmindiscount, ltd.lteacherdiscount
		from lectureadmindiscount lad, lectureteacherdiscount ltd
		where lad.lidx=#{lidx} and ltd.lidx=#{lidx}
		and <![CDATA[(select sysdate from dual) >= lad.ladminstartdiscount and (select sysdate from dual) <= lad.ladminenddiscount
		and (select sysdate from dual) >= ltd.lteacherstartdiscount and (select sysdate from dual) <= ltd.lteacherenddiscount]]>
 	</select>
 	
 	
 	<select id="getLectureList" resultType="com.edume.lecture.model.LectureDTO">
 		select *
 		from lecture
 	</select>
 	
 	<select id="getLectureDetail" parameterType="int" resultType="com.edume.lecture.model.LectureDTO">
 		select *
 		from lecture
 		where lidx=#{lidx}
 	</select>
 	
 	<select id="getLectureCurriculum" parameterType="int" resultType="com.edume.lecture.model.LectureCurriculumDTO">
 		select *
 		from lectureCurriculum
 		where lidx=#{lidx}
 		order by lcsection, lcpart 
 	</select>
 </mapper>