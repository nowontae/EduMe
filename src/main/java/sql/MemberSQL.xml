<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.edume.admin.model">
	 <!-- 전체 유저 리스트 -->
	  <select id="memberIdxAllList" resultType="com.edume.admin.model.MemberDTO">
	  		<!-- select * from member order by midx desc -->
	  		
	  		select * from
			(select rownum as rnum, a.* from	      
			(select * from member order by midx asc)a)b
			where rnum <![CDATA[>=]]> #{start} and rnum <![CDATA[<=]]> #{end}
	  </select>
	  
  		<!-- 전체유저리스트 내 검색기능 -->
  		<select id="findLists" resultType="com.edume.admin.model.MemberDTO">
  			select * from member where ${selects} = #{findKeys}
  		</select>
  		<!-- 유저 정보 -->
  		<select id="memberInfo" parameterType="integer" resultType="com.edume.admin.model.MemberDTO">
  			select * from member where midx=#{midx}
  		</select>
  		<!-- 총 게시물 수-->
  	<select id="member_TotalCnt" resultType="Integer">
  			select 
  				count(*)
  			from 
  				member
  	</select>
  	
  	
  	<!-- 블랙리스트 전체 내역 -->
  	<select id="member_blackList" resultType="com.edume.admin.model.MemberDTO">
  		select * from member where mblack <![CDATA[>=]]> 3
  	</select>
  	<update id="Unblacklist" parameterType="Integer">
		update member set mblack=0 where midx=#{midx}  	
  	</update>
  </mapper>